import { normalizeCmsImage } from '@corpcare/shared/api';
import { IWebinarCard } from '../../types/block';
import { useState } from 'react';
import { Player } from './Player';
export const PreviousWebinarsCard = ({ data }: { data?: IWebinarCard }) => {
  const speakerImage = normalizeCmsImage(
    data?.speaker?.data?.attributes?.image
  );
  const image = normalizeCmsImage(data?.image);
  const [isOpen, setIsOpen] = useState<boolean>(false);

  return (
    <figure
      className="border rounded-lg bg-white flex flex-col w-full lg:min-w-[340px] divide-y hover:shadow-md cursor-pointer"
      onClick={() => setIsOpen(true)}
    >
      <div
        style={{ backgroundImage: `url(${image?.url})` }}
        className="bg-cover bg-center bg-no-repeat bg-opacity-70 h-40 flex items-center"
      >
        <svg
          width="36"
          className="w-full"
          height="26"
          viewBox="0 0 36 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M35.5 12.8906C35.5 12.8047 35.5 12.707 35.4961 12.5938C35.4922 12.2774 35.4844 11.9219 35.4766 11.543C35.4453 10.4531 35.3906 9.3672 35.3047 8.34376C35.1875 6.9336 35.0156 5.75782 34.7812 4.87501C34.5339 3.95371 34.0491 3.11348 33.3753 2.43827C32.7014 1.76307 31.8622 1.27655 30.9414 1.02734C29.8359 0.730469 27.6719 0.546875 24.625 0.433594C23.1758 0.378906 21.625 0.34375 20.0742 0.324219C19.5312 0.316406 19.0273 0.3125 18.5742 0.308594H17.4258C16.9727 0.3125 16.4688 0.316406 15.9258 0.324219C14.375 0.34375 12.8242 0.378906 11.375 0.433594C8.32812 0.550781 6.16016 0.734375 5.05859 1.02734C4.1375 1.27594 3.29793 1.76225 2.624 2.43755C1.95007 3.11285 1.46547 3.95341 1.21875 4.87501C0.980469 5.75782 0.8125 6.9336 0.695312 8.34376C0.609375 9.3672 0.554687 10.4531 0.523437 11.543C0.511719 11.9219 0.507812 12.2774 0.503906 12.5938C0.503906 12.707 0.5 12.8047 0.5 12.8906V13.1094C0.5 13.1953 0.5 13.293 0.503906 13.4063C0.507812 13.7227 0.515625 14.0781 0.523437 14.4571C0.554687 15.5469 0.609375 16.6328 0.695312 17.6563C0.8125 19.0664 0.984375 20.2422 1.21875 21.125C1.71875 22.9961 3.1875 24.4727 5.05859 24.9727C6.16016 25.2696 8.32812 25.4532 11.375 25.5664C12.8242 25.6211 14.375 25.6563 15.9258 25.6758C16.4688 25.6836 16.9727 25.6875 17.4258 25.6914H18.5742C19.0273 25.6875 19.5312 25.6836 20.0742 25.6758C21.625 25.6563 23.1758 25.6211 24.625 25.5664C27.6719 25.4493 29.8398 25.2657 30.9414 24.9727C32.8125 24.4727 34.2812 23 34.7812 21.125C35.0195 20.2422 35.1875 19.0664 35.3047 17.6563C35.3906 16.6328 35.4453 15.5469 35.4766 14.4571C35.4883 14.0781 35.4922 13.7227 35.4961 13.4063C35.4961 13.293 35.5 13.1953 35.5 13.1094V12.8906ZM32.6875 13.0938C32.6875 13.1758 32.6875 13.2656 32.6836 13.3711C32.6797 13.6758 32.6719 14.0117 32.6641 14.375C32.6367 15.4141 32.582 16.4531 32.5 17.418C32.3945 18.6758 32.2461 19.7071 32.0625 20.3985C31.8203 21.3008 31.1094 22.0157 30.2109 22.2539C29.3906 22.4727 27.3242 22.6485 24.5156 22.7539C23.0938 22.8086 21.5625 22.8438 20.0352 22.8633C19.5 22.8711 19.0039 22.875 18.5586 22.875H17.4414L15.9648 22.8633C14.4375 22.8438 12.9102 22.8086 11.4844 22.7539C8.67578 22.6446 6.60547 22.4727 5.78906 22.2539C4.89062 22.0118 4.17969 21.3008 3.9375 20.3985C3.75391 19.7071 3.60547 18.6758 3.5 17.418C3.41797 16.4531 3.36719 15.4141 3.33594 14.375C3.32422 14.0117 3.32031 13.6719 3.31641 13.3711C3.31641 13.2656 3.3125 13.1719 3.3125 13.0938V12.9063C3.3125 12.8242 3.3125 12.7344 3.31641 12.6289C3.32031 12.3242 3.32813 11.9883 3.33594 11.625C3.36328 10.586 3.41797 9.54689 3.5 8.58204C3.60547 7.32423 3.75391 6.29298 3.9375 5.60157C4.17969 4.69922 4.89062 3.98438 5.78906 3.7461C6.60938 3.52735 8.67578 3.35157 11.4844 3.2461C12.9063 3.19141 14.4375 3.15625 15.9648 3.13672C16.5 3.12891 16.9961 3.125 17.4414 3.125H18.5586L20.0352 3.13672C21.5625 3.15625 23.0898 3.19141 24.5156 3.2461C27.3242 3.35547 29.3945 3.52735 30.2109 3.7461C31.1094 3.98829 31.8203 4.69922 32.0625 5.60157C32.2461 6.29298 32.3945 7.32423 32.5 8.58204C32.582 9.54689 32.6328 10.586 32.6641 11.625C32.6758 11.9883 32.6797 12.3281 32.6836 12.6289C32.6836 12.7344 32.6875 12.8281 32.6875 12.9063V13.0938ZM14.5234 18.2344L23.5859 12.961L14.5234 7.76564V18.2344Z"
            fill="white"
          />
        </svg>
      </div>
      <Player
        isOpen={isOpen}
        setIsOpen={setIsOpen}
        youtubeLink={data?.youtubeLink}
      />
      <h1 className="text-[#191919] tracking-[0.02em] font-normal text-lg lg:text-xl lg:!leading-[26px] px-5 pt-5 pb-5 lg:pb-7">
        {data?.title}
      </h1>
      <div className="flex items-center gap-2 p-5">
        <img
          src={speakerImage?.url}
          alt={speakerImage?.alternativeText}
          className="object-cover w-11 h-11 rounded-[4px]"
        />
        <div className="flex flex-col">
          <h2 className="text-[#191919] tracking-[0.02em] font-normal text-sm lg:text-base">
            {data?.speaker?.data?.attributes?.name}
          </h2>
          <h3 className="text-lightGray tracking-[0.02em] font-normal text-sm">
            {data?.speaker?.data?.attributes?.designation}
          </h3>
        </div>
      </div>
    </figure>
  );
};
